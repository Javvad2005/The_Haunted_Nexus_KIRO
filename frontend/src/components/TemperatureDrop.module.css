/* Temperature Drop Effect - Task 24.1 */
/* Requirements: 20.3, 20.4, 20.5, 20.7 */

.temperatureDrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 999;
  animation: temperatureDropEffect 3s ease-in-out forwards;
}

/* Blue desaturation overlay */
.blueOverlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    ellipse at center,
    rgba(100, 150, 200, 0.15) 0%,
    rgba(150, 180, 220, 0.25) 50%,
    rgba(180, 200, 230, 0.15) 100%
  );
  mix-blend-mode: color;
  animation: blueDesaturation 3s ease-in-out forwards;
  will-change: opacity;
}

/* Rising fog layers */
.risingFog {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.fogParticle1,
.fogParticle2,
.fogParticle3 {
  position: absolute;
  bottom: -50px;
  width: 100%;
  height: 200px;
  background: radial-gradient(
    ellipse at center,
    rgba(200, 220, 240, 0.3) 0%,
    rgba(180, 200, 230, 0.2) 40%,
    transparent 70%
  );
  filter: blur(20px);
  animation: risingFog 3s ease-out forwards;
  will-change: transform, opacity;
}

.fogParticle1 {
  left: -10%;
  animation-delay: 0s;
  animation-duration: 3s;
}

.fogParticle2 {
  left: 30%;
  animation-delay: 0.3s;
  animation-duration: 3.2s;
}

.fogParticle3 {
  left: 60%;
  animation-delay: 0.6s;
  animation-duration: 2.8s;
}

/* Edge condensation effect */
.condensation {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 3px solid transparent;
  border-image: linear-gradient(
    135deg,
    rgba(180, 200, 230, 0.4) 0%,
    rgba(200, 220, 240, 0.6) 25%,
    rgba(180, 200, 230, 0.3) 50%,
    rgba(200, 220, 240, 0.6) 75%,
    rgba(180, 200, 230, 0.4) 100%
  ) 1;
  animation: condensationPulse 3s ease-in-out forwards;
  will-change: opacity, border-image;
}

/* Keyframe animations */
@keyframes temperatureDropEffect {
  0% {
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes blueDesaturation {
  0% {
    opacity: 0;
    filter: hue-rotate(0deg) saturate(1);
  }
  20% {
    opacity: 1;
    filter: hue-rotate(10deg) saturate(0.7);
  }
  50% {
    opacity: 1;
    filter: hue-rotate(15deg) saturate(0.6);
  }
  80% {
    opacity: 1;
    filter: hue-rotate(10deg) saturate(0.7);
  }
  100% {
    opacity: 0;
    filter: hue-rotate(0deg) saturate(1);
  }
}

@keyframes risingFog {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0;
  }
  20% {
    opacity: 0.6;
  }
  50% {
    opacity: 0.8;
  }
  80% {
    opacity: 0.4;
  }
  100% {
    transform: translateY(-150px) scale(1.3);
    opacity: 0;
  }
}

@keyframes condensationPulse {
  0% {
    opacity: 0;
    border-width: 0px;
  }
  15% {
    opacity: 0.8;
    border-width: 3px;
  }
  50% {
    opacity: 1;
    border-width: 4px;
  }
  85% {
    opacity: 0.6;
    border-width: 3px;
  }
  100% {
    opacity: 0;
    border-width: 0px;
  }
}

/* Mild slow-motion effect applied to body when active */
.temperatureDrop ~ * {
  animation-duration: 1.1 !important;
}

/* Mobile optimization */
@media (max-width: 768px) {
  .blueOverlay {
    background: radial-gradient(
      ellipse at center,
      rgba(100, 150, 200, 0.1) 0%,
      rgba(150, 180, 220, 0.2) 50%,
      rgba(180, 200, 230, 0.1) 100%
    );
  }
  
  .fogParticle1,
  .fogParticle2,
  .fogParticle3 {
    height: 150px;
    filter: blur(15px);
  }
  
  .condensation {
    border-width: 2px;
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .temperatureDrop {
    animation-duration: 5s !important;
  }
  
  .blueOverlay {
    animation-duration: 5s !important;
  }
  
  .fogParticle1,
  .fogParticle2,
  .fogParticle3 {
    animation-duration: 5s !important;
    filter: blur(25px);
  }
  
  .condensation {
    animation-duration: 5s !important;
  }
}
